<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Advanced Task Session 4</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="wrapper" class="clearfix">
        <header><h1>Main Heading</h1></header><!--/header-->
        <div id="inner">
            <img src="img/main_picture.jpg" alt="Solent Building">
            <aside>
                <h2>Sub Section</h2>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab consectetur dicta dolor doloribus dolorum eos excepturi harum maiores mollitia nam nisi, numquam odit quam rem, repellat sed sequi temporibus veniam?
                </p>
                <h3>Title</h3>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum enim eveniet harum hic ipsum laudantium optio quidem rem sit voluptas. Debitis dolore doloribus laudantium obcaecati officia quibusdam rem sint totam?
                </p>
                <h3>Back</h3>
                <p><a href="../session9">Back</a></p>


            </aside><!--aside-->
        </div><!--/Inner-->
        <section>
            <h2>User Data Table</h2>
            <div>
                <table id="user_data_table">
                    <thead>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </section><!--/Section-->
    </div>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-messaging.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyD30MU9-0hYceCIGYxH6ojzG3c20hTIABI",
            authDomain: "localhost",
            databaseURL: "https://cda400-83067.firebaseio.com",
            projectId: "cda400-83067",
            storageBucket: "cda400-83067.appspot.com",
            messagingSenderId: "191913862279"
        };



        firebase.initializeApp(config);

        var users = firebase.database().ref('users/');

        var user_data_table = document.getElementById('user_data_table').lastElementChild;


        users.on("child_added", function(data) {
            var user_tr = document.createElement('tr');
            var user = data.val();
            var name = document.createElement('td');
            name.innerHTML = user.name;
            var email = document.createElement('td');
            email.innerHTML = user.email;
            var phone = document.createElement('td');
            phone.innerHTML = user.phone_number;
            user_tr.appendChild(name);
            user_tr.appendChild(email);
            user_tr.appendChild(phone);
            user_data_table.appendChild(user_tr);

        });
    </script>
</body>
</html>
